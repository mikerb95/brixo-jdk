<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presentaci√≥n - Brixo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        html, body { height: 100vh; margin: 0; padding: 0; overflow: hidden; background: #000; color: #fff; }
        .slide { display: none; height: 100vh; align-items: center; justify-content: center; }
        .slide.active { display: flex; }
        .slide img { width: 100vw; height: 100vh; object-fit: cover; }
        .fullscreen-btn {
            position: fixed; top: 10px; right: 10px;
            background: rgba(255,255,255,0.8); border: none; border-radius: 50%;
            width: 50px; height: 50px; font-size: 20px; cursor: pointer; z-index: 1000;
        }
    </style>
</head>
<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()" title="Pantalla Completa">&#x26F6;</button>
    <div id="slides">
        <div th:each="i : ${#numbers.sequence(1, totalSlides)}"
             class="slide" th:classappend="${i == 1} ? ' active'"
             th:attr="data-slide=${i}">
            <img th:src="'/presentation/Slide' + ${i} + '.PNG'"
                 th:alt="'Slide ' + ${i}" loading="lazy">
        </div>
    </div>

    <script th:inline="javascript">
        let currentSlide = 1;
        const totalSlides = /*[[${totalSlides}]]*/ 11;

        function updateSlide() {
            fetch('/api/slide')
                .then(response => response.json())
                .then(data => {
                    const newSlide = data.slide;
                    if (newSlide !== currentSlide) {
                        document.querySelector('.slide.active').classList.remove('active');
                        document.querySelector('[data-slide="' + newSlide + '"]').classList.add('active');
                        currentSlide = newSlide;
                    }
                });
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Error: ' + err.message);
                });
            } else {
                document.exitFullscreen();
            }
        }

        setInterval(updateSlide, 1000);
    </script>
</body>
</html>
